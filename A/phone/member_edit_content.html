<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">
    <head>
        <title></title>
        <meta charset="utf-8">
        <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" href="css/fonts/font-awesome.min.css">
        <link rel="stylesheet" href="css/ui-box.css">
        <link rel="stylesheet" href="css/ui-base.css">
        <link rel="stylesheet" href="css/ui-color.css">
        <link rel="stylesheet" href="css/appcan.icon.css">
        <link rel="stylesheet" href="css/appcan.control.css">
        <link rel="stylesheet" href="society_reg_content/css/main.css">
    </head>
    <body class="um-vp bc-bg" ontouchstart>
        <div class="ub ub-ver uinn-a1">
            <div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac">
                <div class="ulev-app1 umw4">
                   姓名：
                </div>
                <div class="ub ub-ac umh5 ub-f1">
                    <div class="uinput ub ub-f1">
                        <input placeholder="陈小生" type="text" class="ub-f1" id="name">
                    </div>
                </div>
            </div>
            <div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
                <div class="ulev-app1 umw4">
                    性别：
                </div>
                <div class="ub ub-ac umh5 ub-f1">
                    <div class="uinput ub ub-f1">
                       <select id="sex">
                           <option value="男">男</option>
                           <option value="女">女</option>
                       </select>
                    </div>
                </div>
            </div>
            <div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
                <div class="ulev-app1 umw4">
                    院系-专业：
                </div>
                <div class="ub ub-ac umh5 ub-f1">
                    <div class="uinput ub ub-f1">
                        <input placeholder="信息工程学院-计算机专业" type="text" class="ub-f1" id="major">
                    </div>
                </div>
            </div>
            
            <div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
                <div class="ulev-app1 umw4">
                    宿舍：
                </div>
                <div class="ub ub-ac umh5 ub-f1">
                    <div class="uinput ub ub-f1">
                        <input placeholder="A栋1101" type="text" class="ub-f1" id="dorm">
                    </div>
                </div>
            </div>
            
            <div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
                <div class="ulev-app1 umw4">
                    QQ：
                </div>
                <div class="ub ub-ac umh5 ub-f1">
                    <div class="uinput ub ub-f1">
                        <input placeholder="754798989" type="text" class="ub-f1" id="qq">
                    </div>
                </div>
            </div>
            <div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
                <div class="ulev-app1 umw4">
                    邮箱：
                </div>
                <div class="ub ub-ac umh5 ub-f1">
                    <div class="uinput ub ub-f1">
                        <input placeholder="754798989@qq.com" type="text" class="ub-f1" id="email">
                    </div>
                </div>
            </div>
            <div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
                <div class="ulev-app1 umw4">
                  电话：
                </div>
                <div class="ub ub-ac umh5 ub-f1">
                    <div class="uinput ub ub-f1">
                        <input placeholder="18922292506" type="text" class="ub-f1" id="phone">
                    </div>
                </div>
            </div>
            <div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
                <div class="ulev-app1 umw4">
                    部门：
                </div>
                <div class="ub ub-ac umh5 ub-f1">
                    <div class="uinput ub ub-f1">
                        <input placeholder="技术部" type="text" class="ub-f1" id="dept">
                    </div>
                </div>
            </div>
            
            <div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
                <div class="ulev-app1 umw4">
                    职务：
                </div>
                <div class="ub ub-ac umh5 ub-f1">
                    <div class="uinput ub ub-f1">
                        <input placeholder="干部" type="text" class="ub-f1" id="post">
                    </div>
                </div>
            </div>
            <div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
                <div class="ulev-app1 umw4">
                    会费缴交情况：
                </div>
                <div class="ub ub-ac umh5 ub-f1">
                    <div class="uinput ub ub-f1">
                        <input type="text" placeholder="2015年已交" class="ub-f1" id="money">
                    </div>
                </div>
            </div>
            <div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
                <div class="ulev-app1 umw4">
                    会员状态：
                </div>
                <div class="ub ub-ac umh5 ub-f1">
                    <div class="uinput ub ub-f1">
                       <select id="state">
                           <option value="在册">在册</option>
                           <option value="已毕业">已毕业</option>
                            <option value="已退出">已退出</option>
                       </select>
                    </div>
                </div>
            </div>
             <div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
                <div class="ulev-app1 umw4">
                    入会时间：
                </div>
                <div class="ub ub-ac umh5 ub-f1">
                    <div class="uinput ub ub-f1">
                        <input type="text" placeholder="2015-10-10" class="ub-f1" id="addtime">
                    </div>
                </div>
            </div>
             <div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
                <div class="ulev-app1 umw4">
                    毕/退时间：
                </div>
                <div class="ub ub-ac umh5 ub-f1">
                    <div class="uinput ub ub-f1">
                        <input type="text" placeholder="2017-10-10，可空置" class="ub-f1" id="leavetime">
                    </div>
                </div>
            </div>
             <div class="uba b-gra3 uc-a1 c-wh ub uinn-a7 ub-ac umar-at1">
                <div class="ulev-app1 umw4">
                    备注：
                </div>
                <div class="ub ub-ac umh5 ub-f1">
                    <div class="uinput ub ub-f1">
                        <textarea placeholder="退出原因等，可空置" class="ub-f1" id="desc"></textarea>
                    </div>
                </div>
            </div>
            <div class="ub ub-ver">
                <div class="uinn-at1">
                    <div class="btn ub ub-ac bc-text-head ub-pc bc-btn"  id="submit">
                        确认提交
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script src="js/appcan.js"></script>
    <script src="js/appcan.control.js"></script>
    <script src="js/appcan.listview.js"></script>
    </body>
    <script>
        appcan.ready(function() {
            appcan.initBounce();
            getMemberDetail();
        })
        function getMemberDetail() {
            var m_id = appcan.locStorage.getVal("m_id");
            
            var request = appcan.require('request');
       
            request.ajax({
                 type : 'POST',
                  url : appcan.locStorage.getVal("URLBase")+'/member_detail.jsp',
                  data : {
                      'm_id' : m_id
                  },
                  dataType:"json",
                   success : function (rtn) {
            document.getElementById("name").value = rtn.name;
            document.getElementById("sex").value = rtn.sex;
            document.getElementById("major").value = rtn.major;
            document.getElementById("dorm").value = rtn.dorm;
            document.getElementById("qq").value = rtn.qq;
            document.getElementById("email").value = rtn.email;
            document.getElementById("phone").value = rtn.phone;
            document.getElementById("dept").value = rtn.dept;
            document.getElementById("post").value = rtn.post;
            document.getElementById("money").value = rtn.money;
            document.getElementById("addtime").value = rtn.addtime.substring(0,10);            
            document.getElementById("state").value = rtn.state;
            if(rtn.leavetime!=null&&rtn.leavetime!="null"){
                document.getElementById("leavetime").value = rtn.leavetime.substring(0,10);
            }
            if(rtn.desc!=null&&rtn.desc!="null"){
                document.getElementById("desc").value = rtn.desc;
            }
          }
        })
     }
        appcan.button("#submit", "ani-act", function() {
            
            var name=document.getElementById("name").value;
            var sex=document.getElementById("sex").value ;
            var major=document.getElementById("major").value ;
            var dorm=document.getElementById("dorm").value;
            var qq=document.getElementById("qq").value;
            var email=document.getElementById("email").value ;
            var phone=document.getElementById("phone").value ;
            var dept=document.getElementById("dept").value;
            var post=document.getElementById("post").value ;
            var money=document.getElementById("money").value;
            var addtime=document.getElementById("addtime").value;            
            var state=document.getElementById("state").value;
            var leavetime=document.getElementById("leavetime").value;
            var desc=document.getElementById("desc").value;            
            var m_id=appcan.locStorage.getVal("m_id");
            
             if(name==""||sex==""||major==""||dorm==""||qq==""||email==""||phone==""||dept==""||post==""
            ||money==""||state==""||addtime==""){
                appcan.window.openToast({
                    msg:'除毕/选时间和备注外各字段不能为空！',
                    duration:2000
                    });
            }else{

                var request = appcan.require('request');
                request.ajax({
                    type : 'POST',
                    url : appcan.locStorage.getVal("URLBase")+'/member_edit.jsp',
                    data : {
                        'name' : name,'sex' : sex,'major' : major,'dorm' : dorm,
                        'qq' : qq,'email' : email,'phone' : phone,'dept' : dept,
                        'post' : post,'money' : money,'state' : state,'addtime' : addtime,
                        'leavetime' : leavetime,'desc' : desc,'m_id' : m_id
                    },
                    success : function (rtn) {
                      if(rtn=="true"){
                        appcan.window.alert({
                            title : "修改会员信息",
                            content : "修改成功！",
                            buttons : ['确定'],
                            callback : function(err,data,dataType,optId){
                            uexWindow.evaluatePopoverScript("member_index","content","listMember()");
                            uexWindow.evaluateScript("member_add",0,"appcan.window.close(-1)");
                             }
                        });
                      }
                   }
                })
             }
          })                
    </script>
</html>